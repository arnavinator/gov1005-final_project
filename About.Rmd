---
title: "Global Health Expenditure by Demographics"
author: "Arnav Srivastava"
date: "2/28/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(tidyverse)
```
## Milestone 4 update
Currently, I have been working on cleaning up and finalizing the data I want to use for my project. I have decided that I will probably cut one dataset on child healthcare from my gather_data, as it does not have information for most western countries; unless I change my project to analyzing health in Africa, this dataset cannot help with many findings.
I have cleaned up my datasets, and have merged two datasets so that I can know the WHO reigion and WB income bracket of each country. I then merged this dataset with my cleaned up population demographics dataset. Finally, I merged this dataset with my
My next steps will be to pivot this table, and figure out a way to inner_join the year column of pop_demo with the year column of health_expend dataset, as currently my table is unable to merge these comprehensively. 

```{r testing, echo = FALSE}
# loading libraries to read and process datasets, and cleaned names of every
# dataset

library(tidyverse)
library(readr)
library(readxl)
library(rvest)
library(janitor)


# gives population by age and gender for every country since 1979. Removed
# irrelavent column on footnotes

pop_demo <- read_csv("raw-data/UN-pop-age-sex.csv") %>% 
  clean_names() %>% 
  select(-value_footnotes)


# tells which income group each country is in. Selected columns economy and
# income_group, as other columns were irrelevant. Then, removed the first row as
# it was kept null, and last few rows as information was not relevant to country
# income. 
  
income <- read_excel("raw-data/Income class of countries.xls", skip = 4) %>% 
  clean_names() %>% 
  select(economy, income_group)
income <- income[-c(1),]
income <- income[-c(219:274),]
  

# NEEDS PIVOTTING! COME BACK TO 

health_expend <- read_excel("raw-data/health expend and gdp.xlsx") %>% 
  clean_names()


# dataset incomplete, may have to cut from my project

child_data <- read_excel("raw-data/child-health.xlsx") %>% 
  clean_names()


# pulls table from internet which classifies countries by their reigion...
# needed to skip the first line, and filter out all rows where countries were
# not listed (the table had rows to index all countries starting by the same
# letter). Selected for only country name and reigion, all else was irrelevant

page <- read_html("https://www.who.int/choice/demography/by_country/en/")
country_reigion <- html_nodes(page, "table") %>% .[[1]] %>%
  html_table(fill = TRUE) %>% 
  clean_names() %>% 
  mutate(country = x1,
         reigion_num = x2,
         reigion = x3) %>% 
  select(country, reigion) %>% 
  filter(reigion != "")
country_reigion <- country_reigion[-c(1),]


# merges my dataset identifying a country's WHO reigion and their WB Income
# Bracket

classification <- country_reigion %>% 
  inner_join(income, by = c("country" = "economy"))

classification


# now merge the classification dataset with the dataset on age/sex population
# demographics for each country by year

pop_class <- classification %>% 
  inner_join(pop_demo, by = c("country" = "country_or_area"))

pop_class


# now merge the pop_class dataset with healthcare expenditures dataset Current
# Health Expenditure, Domestic General Government Health Expenditure, and Gross
# Domestic Product

final <- pop_class %>% 
  inner_join(health_expend, by = c("country" = "countries"))


```


## Background

For this project, I strive to analyze how global health expenditure varies based on economic and geographic factors. From the World Bank (WB), the Global Data Health Exchange, and the World Health Organization (WHO), I have gathered data regarding population sex/age demographics; the estimated the burden of diseases, injuries, and risk factors; historic health care spending and health care spending projections (1995-2050); current health expenditure per capita and per general government expenditure; and domestic/foreign expenditure for healthcare for children under 5; for 195 countries from 2000-2018. I plan on grouping countries by WB Income brackets and WHO Reigional Brackets to explore how the collected variables effect the proportional spending on health through an income and reigional lens.

For instance, I hope to answer questions such as: what gender and age demographics maximize spending on healthcare children per capita? With what demographics and income bracket leads countries to maximize spending on infectious diseases (which socioeconomic conditions maximize the the balance between spending on healthcare per capita with respect incidence/impact to infectious disease in the area?)


This data can be found on my GitHub repo at https://github.com/arnavinator/gov1005-final_project

## About Me
My name is Arnav Srivastava, and I am currently a first-year at Harvard College. I am fascinated by global health and improving accessibility to the ever-growing frontier of science; I hope to concentrate in biomedical engineering, electrical engineering, or statistics, and help advance the health of our global community.



